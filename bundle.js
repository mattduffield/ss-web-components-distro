class BaseElement extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.hasRendered||(this.shadow.adoptedStyleSheets=[...document.adoptedStyleSheets],this.hasRendered=!0)}}customElements.define("base-element",BaseElement);const hexToHSL=e=>{let t=0,n=0,s=0;4==e.length?(t="0x"+e[1]+e[1],n="0x"+e[2]+e[2],s="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],n="0x"+e[3]+e[4],s="0x"+e[5]+e[6]),t/=255,n/=255,s/=255;let r=Math.min(t,n,s),a=Math.max(t,n,s),i=a-r,o=0,l=0,c=0;return o=0==i?0:a==t?(n-s)/i%6:a==n?(s-t)/i+2:(t-n)/i+4,o=Math.round(60*o),o<0&&(o+=360),c=(a+r)/2,l=0==i?0:i/(1-Math.abs(2*c-1)),l=+(100*l).toFixed(1),c=+(100*c).toFixed(1),{h:o,s:l,l:c}},hslToHex=(e,t,n)=>{let s,r,a;if(e/=360,n/=100,0===(t/=100))s=r=a=n;else{const i=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;s=i(l,o,e+1/3),r=i(l,o,e),a=i(l,o,e-1/3)}const i=e=>{const t=Math.round(255*e).toString(16);return 1===t.length?"0"+t:t};return`#${i(s)}${i(r)}${i(a)}`},setCssVar=(e,t,n)=>{document.documentElement.style.setProperty(e,t+(n||""))},setTextLum=e=>{const t=document.querySelector(e),n=getComputedStyle(t,null).getPropertyValue("background-color"),[s,r,a]=n.replace("rgb(","").replace(")","").split(","),i=s.trim(),o=r.trim(),l=a.trim();(299*parseInt(i)+587*parseInt(o)+114*parseInt(l))/1e3<130?document.documentElement.style.setProperty("--text-lum",90):document.documentElement.style.setProperty("--text-lum",10)},collectAllElementsDeep=(e=null,t,n=null)=>{let s=[];if(n)s=n;else{const e=function(t){for(let n,r=0;n=t[r];++r)s.push(n),n.shadowRoot&&e(n.shadowRoot.querySelectorAll("*"))};t.shadowRoot&&e(t.shadowRoot.querySelectorAll("*")),e(t.querySelectorAll("*"))}return s.filter((t=>t.matches(e)))},$=(e=null,t=document)=>{const[n=null]=collectAllElementsDeep(e,t);return n},$$=(e=null,t=document)=>collectAllElementsDeep(e,t),camelCaseToProperCase=e=>e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase())),properCaseToHyphenCase=e=>e.replace(/([A-Z])/g,"-$1").replace(/^./,(e=>e.toUpperCase())).substr(1).toLowerCase(),toBool=e=>"string"==typeof e?"true"===e:!!e,toDate=e=>{const t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=Date.parse(e);if(e&&!isNaN(n)){let n={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0,timeZone:t};const s=new Date(e).toLocaleTimeString(void 0,n).split(","),r=s[0],a=s[1].split(":"),i=a[0],o=a[1],l=a[2].split(" ");l[0];return`${r} ${i}:${o} ${l[1]}`}return e},toLower=e=>{let t="";return e&&(t=e.toLowerCase()),t},toPhone=e=>{let t="";if(e)switch((e=e.replace(/\(/g,"").replace(/\)/g,"").replace(/\-/g,"").replace(/\s/g,"")).length){case 1:case 2:t=`(${e}`;break;case 3:t=`(${e})`;break;case 4:case 5:case 6:t=`(${e.substr(0,3)}) ${e.substr(3)}`;break;case 7:case 8:case 9:case 10:t=`(${e.substr(0,3)}) ${e.substr(3,3)}-${e.substr(6)}`}return t},toProper=e=>e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase())),toUpper=e=>{let t="";return e&&(t=e.toUpperCase()),t},pluckValue=(e=null,t="")=>{try{t=t.replace(/\{/g,"${");return new Function(...Object.keys(e),"return `"+t+"`;")(...Object.values(e))}catch(e){return console.log("pluckValue:",e),"ERROR"}},RenderRowTemplate=(expr,row)=>{const rowValue=eval(expr)(row);return rowValue},RenderTemplate=(e,t)=>{if("string"!=typeof e)return e;e=e.replace(/{{/g,"${").replace(/}}/g,"}");try{const n=`\n      const toBool = ${toBool};\n      const toDate = ${toDate};\n      const toLower = ${toLower};\n      const toPhone = ${toPhone};\n      const toProper = ${toProper};\n      const toUpper = ${toUpper};\n      ${Object.keys(t).map((e=>`const ${e} = ${"string"==typeof t[e]?`\`${t[e]}\``:JSON.stringify(t[e])};\n`)).join("")}\n      return \`${e}\`;        \n      `;return new Function(n).call(t)}catch(e){return console.log(e),"ERROR"}},enableDragElement=(e,t)=>{const n={isDragging:!1,xDiff:0,yDiff:0,x:0,y:0};function s(e,t){e.style.transform=`translate(${n.x}px, ${n.y}px)`}function r(t){n.isDragging&&(n.x=t.pageX-n.xDiff,n.y=t.pageY-n.yDiff),s(e)}function a(){n.isDragging=!1,t.removeEventListener("mousemove",r),t.removeEventListener("mouseup",a)}t.classList.add("cursor-move","user-select-none"),t.addEventListener("mousedown",(function(e){t.addEventListener("mousemove",r),t.addEventListener("mouseup",a),n.isDragging=!0,n.xDiff=e.pageX-n.x,n.yDiff=e.pageY-n.y})),s(e)},composeEvent=(e,t,n={})=>{if(!e)throw Error("Event name is missing!");if(t){const s={keydown:()=>{const{altKey:e,charCode:s,code:r,ctrlKey:a,currentTarget:i,key:o,keyCode:l,metaKey:c,shiftKey:d,target:u}=t;n={altKey:e,charCode:s,code:r,ctrlKey:a,currentTarget:i,key:o,keyCode:l,metaKey:c,shiftKey:d,target:u}}};s[e]&&(n=s[e])}return new CustomEvent(e,{bubbles:!0,cancelable:!1,composed:!0,detail:n})},data={first_name:"John",last_name:"Tomaselli"},ctx={},bind=(e=document,t={})=>{bindElements(e,t),listenForBind(e,t)},bindElements=(e=document,t={})=>{$$("[data-bind]",e).forEach((e=>{const n=e.getAttribute("data-bind").split("\n");for(let s of n){if(!s.trim())continue;const[n,r]=s.split(":"),a=`${e.nodeName}_${r.trim()}`;t[a]||Object.defineProperty(t,a,{get:()=>e}),e[n.trim()]=t[r.trim()],"INPUT"===e.nodeName&&(e.addEventListener("input",(n=>{const s=e.getAttribute("data-bind").split("\n");for(let e of s){if(!e.trim())continue;const[s,r]=e.split(":");t[r.trim()]=n.target[s.trim()]}})),e.addEventListener("change",(n=>{const s=e.getAttribute("data-bind").split("\n");for(let e of s){if(!e.trim())continue;const[s,r]=e.split(":");t[r.trim()]=n.target[s.trim()]}})))}}));$$("[data-trigger]",e).forEach((e=>{const n=e.getAttribute("data-trigger").split("\n");for(let s of n){if(!s.trim())continue;const[n,r]=s.trim().split(":");t[r.trim()]&&e.addEventListener(n.trim(),t[r.trim()].bind(t))}}))},observers=new WeakMap,listenForBind=(e=document,t={})=>{if(observers.has(e))return observers.get(e);let n=!1;const s=new MutationObserver((e=>{for(const n of e)if("attributes"===n.type&&n.target instanceof Element)bindElements(n.target,t);else if("childList"===n.type&&n.addedNodes.length)for(const e of n.addedNodes)e instanceof Element&&bindElements(e,t)}));s.observe(e,{childList:!0,subtree:!0,attributeFilter:["data-bind","data-trigger"]});const r={get closed(){return n},unsubscribe(){n=!0,observers.delete(e),s.disconnect()}};return observers.set(e,r),r};class EventBusClass{constructor(){this._bus=document.createElement("div")}subscribe(e,t){this._bus.addEventListener(e,t)}unsubscribe(e,t){this._bus.removeEventListener(e,t)}publish(e,t={}){this._bus.dispatchEvent(new CustomEvent(e,{detail:t}))}}const EventBus=new EventBusClass,memoizer=e=>{const t={};return n=>{if(null!=t[n])return t[n];{const s=e(n);return t[n]=s,s}}},pathToRegex=e=>new RegExp("^"+e.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$"),getParams=e=>{const t=e.result.slice(1),n=Array.from(e.route.path.matchAll(/:(\w+)/g)).map((e=>e[1]));return Object.fromEntries(n.map(((e,n)=>[e,t[n]])))};class Router{constructor(e){this.config=e,window.addEventListener("popstate",this.navigate.bind(this)),window.addEventListener("hashchange",this.navigate.bind(this)),document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(e=>{e.target.matches("[data-link]")&&(e.preventDefault(),this.navigateTo(e.target.href))}))}))}navigateTo(e){history.pushState(null,null,e),this.navigate()}navigate(){let e=this.config.routes.map((e=>({route:e,result:`${location.pathname}${location.hash}`.match(pathToRegex(e.path))}))).find((e=>null!==e.result));e||(e={route:this.config.routes[0],result:[location.pathname]});const{title:t,view:n}=e.route,s=properCaseToHyphenCase(n.name);this.config.ctx.params=getParams(e);const r=`<${s}></${s}>`;$(this.config.viewport).innerHTML=r,document.title=t}}function*parse(e){let t="",n=0,s=!1;for(let r=0;r<e.length;r+=1)"{"!==e[r]||"{"!==e[r+1]||"\\"===e[r-1]||s?"}"===e[r]&&"}"===e[r+1]&&"\\"!==e[r-1]&&s&&(s=!1,yield{type:"part",start:n,end:r+2,value:t.slice(2).trim()},t="",r+=2,n=r):(s=!0,t&&(yield{type:"string",start:n,end:r,value:t}),t="{{",n=r,r+=2),t+=e[r]||"";t&&(yield{type:"string",start:n,end:e.length,value:t})}var __classPrivateFieldSet$2=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},__classPrivateFieldGet$2=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},_setter,_value;class AttributeTemplatePart{constructor(e,t){this.expression=t,_setter.set(this,void 0),_value.set(this,""),__classPrivateFieldSet$2(this,_setter,e),__classPrivateFieldGet$2(this,_setter).updateParent("")}get attributeName(){return __classPrivateFieldGet$2(this,_setter).attr.name}get attributeNamespace(){return __classPrivateFieldGet$2(this,_setter).attr.namespaceURI}get value(){return __classPrivateFieldGet$2(this,_value)}set value(e){__classPrivateFieldSet$2(this,_value,e||""),__classPrivateFieldGet$2(this,_setter).updateParent(e)}get element(){return __classPrivateFieldGet$2(this,_setter).element}get booleanValue(){return __classPrivateFieldGet$2(this,_setter).booleanValue}set booleanValue(e){__classPrivateFieldGet$2(this,_setter).booleanValue=e}}_setter=new WeakMap,_value=new WeakMap;class AttributeValueSetter{constructor(e,t){this.element=e,this.attr=t,this.partList=[]}get booleanValue(){return this.element.hasAttributeNS(this.attr.namespaceURI,this.attr.name)}set booleanValue(e){if(1!==this.partList.length)throw new DOMException("Operation not supported","NotSupportedError");this.partList[0].value=e?"":null}append(e){this.partList.push(e)}updateParent(e){if(1===this.partList.length&&null===e)this.element.removeAttributeNS(this.attr.namespaceURI,this.attr.name);else{const e=this.partList.map((e=>"string"==typeof e?e:e.value)).join("");this.element.setAttributeNS(this.attr.namespaceURI,this.attr.name,e)}}}var __classPrivateFieldSet$1=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},__classPrivateFieldGet$1=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},_parts$1;class NodeTemplatePart{constructor(e,t){this.expression=t,_parts$1.set(this,void 0),__classPrivateFieldSet$1(this,_parts$1,[e]),e.textContent=""}get value(){return __classPrivateFieldGet$1(this,_parts$1).map((e=>e.textContent)).join("")}set value(e){this.replace(e)}get previousSibling(){return __classPrivateFieldGet$1(this,_parts$1)[0].previousSibling}get nextSibling(){return __classPrivateFieldGet$1(this,_parts$1)[__classPrivateFieldGet$1(this,_parts$1).length-1].nextSibling}replace(...e){const t=e.map((e=>"string"==typeof e?new Text(e):e));t.length||t.push(new Text("")),__classPrivateFieldGet$1(this,_parts$1)[0].before(...t);for(const e of __classPrivateFieldGet$1(this,_parts$1))e.remove();__classPrivateFieldSet$1(this,_parts$1,t)}}function createProcessor(e){return{createCallback(e,t,n){this.processCallback(e,t,n)},processCallback(t,n,s){var r;if("object"==typeof s&&s)for(const t of n)if(t.expression in s){const n=null!==(r=s[t.expression])&&void 0!==r?r:"";e(t,n)}}}}function processPropertyIdentity(e,t){e.value=String(t)}function processBooleanAttribute(e,t){return"boolean"==typeof t&&e instanceof AttributeTemplatePart&&"boolean"==typeof e.element[e.attributeName]&&(e.booleanValue=t,!0)}_parts$1=new WeakMap;const propertyIdentity=createProcessor(processPropertyIdentity);var __classPrivateFieldSet=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},__classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},_processor,_parts;function*collectParts(e){const t=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null,!1);let n;for(;n=t.nextNode();)if(n instanceof Element&&n.hasAttributes())for(let e=0;e<n.attributes.length;e+=1){const t=n.attributes.item(e);if(t&&t.value.includes("{{")){const e=new AttributeValueSetter(n,t);for(const n of parse(t.value))if("string"===n.type)e.append(n.value);else{const t=new AttributeTemplatePart(e,n.value);e.append(t),yield t}}}else if(n instanceof Text&&n.textContent&&n.textContent.includes("{{"))for(const e of parse(n.textContent)){e.end<n.textContent.length&&n.splitText(e.end),"part"===e.type&&(yield new NodeTemplatePart(n,e.value));break}}class TemplateInstance extends DocumentFragment{constructor(e,t,n=propertyIdentity){var s,r;super(),_processor.set(this,void 0),_parts.set(this,void 0),Object.getPrototypeOf(this!==TemplateInstance.prototype)&&Object.setPrototypeOf(this,TemplateInstance.prototype),this.appendChild(e.content.cloneNode(!0)),__classPrivateFieldSet(this,_parts,Array.from(collectParts(this))),__classPrivateFieldSet(this,_processor,n),null===(r=(s=__classPrivateFieldGet(this,_processor)).createCallback)||void 0===r||r.call(s,this,__classPrivateFieldGet(this,_parts),t)}update(e){__classPrivateFieldGet(this,_processor).processCallback(this,__classPrivateFieldGet(this,_parts),e)}}_processor=new WeakMap,_parts=new WeakMap;const directives=new WeakSet;function isDirective(e){return directives.has(e)}function processDirective(e,t){return!!isDirective(t)&&(t(e),!0)}const eventListeners=new WeakMap;class EventHandler{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this),eventListeners.get(this.element).set(this.type,this)}set(e){"function"==typeof e?this.handleEvent=e.bind(this.element):"object"==typeof e&&"function"==typeof e.handleEvent?this.handleEvent=e.handleEvent.bind(e):(this.element.removeEventListener(this.type,this),eventListeners.get(this.element).delete(this.type))}static for(e){eventListeners.has(e.element)||eventListeners.set(e.element,new Map);const t=e.attributeName.slice(2),n=eventListeners.get(e.element);return n.has(t)?n.get(t):new EventHandler(e.element,t)}}function processEvent(e,t){return!!(e instanceof AttributeTemplatePart&&e.attributeName.startsWith("on"))&&(EventHandler.for(e).set(t),e.element.removeAttributeNS(e.attributeNamespace,e.attributeName),!0)}function processSubTemplate(e,t){return t instanceof TemplateResult&&e instanceof NodeTemplatePart&&(t.renderInto(e),!0)}function processDocumentFragment(e,t){return t instanceof DocumentFragment&&e instanceof NodeTemplatePart&&(t.childNodes.length&&e.replace(...t.childNodes),!0)}function isIterable(e){return"object"==typeof e&&Symbol.iterator in e}function processIterable(e,t){if(!isIterable(t))return!1;if(e instanceof NodeTemplatePart){const n=[];for(const e of t)if(e instanceof TemplateResult){const t=document.createDocumentFragment();e.renderInto(t),n.push(...t.childNodes)}else e instanceof DocumentFragment?n.push(...e.childNodes):n.push(String(e));return n.length&&e.replace(...n),!0}return e.value=Array.from(t).join(" "),!0}function processPart(e,t){processDirective(e,t)||processBooleanAttribute(e,t)||processEvent(e,t)||processSubTemplate(e,t)||processDocumentFragment(e,t)||processIterable(e,t)||processPropertyIdentity(e,t)}const templates=new WeakMap,renderedTemplates=new WeakMap,renderedTemplateInstances=new WeakMap;class TemplateResult{constructor(e,t,n){this.strings=e,this.values=t,this.processor=n}get template(){if(templates.has(this.strings))return templates.get(this.strings);{const e=document.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce(((e,n,s)=>e+n+(s<t?`{{ ${s} }}`:"")),""),templates.set(this.strings,e),e}}renderInto(e){const t=this.template;if(renderedTemplates.get(e)!==t){renderedTemplates.set(e,t);const n=new TemplateInstance(t,this.values,this.processor);return renderedTemplateInstances.set(e,n),void(e instanceof NodeTemplatePart?e.replace(...n.children):e.appendChild(n))}renderedTemplateInstances.get(e).update(this.values)}}const defaultProcessor=createProcessor(processPart);function html(e,...t){return new TemplateResult(e,t,defaultProcessor)}function render(e,t){e.renderInto(t)}class CssTheme extends BaseElement{static get observeAttributes(){return["hex","font-size"]}constructor(){super()}attributeChangedCallback(e,t,n){"hex"===e?(console.log("setting hex",n),this.hex=n):"font-size"===e&&(console.log("setting fontSize",n),this.fontSize=n)}get fontSize(){return this.INPUT_fontSize?this.INPUT_fontSize.value:100}set fontSize(e){this.INPUT_fontSize&&(this.INPUT_fontSize.value=+e)}get hex(){return this.INPUT_hex?this.INPUT_hex.value:"#4095bf"}set hex(e){this.INPUT_hex&&(this.INPUT_hex.value=e)}get hue(){return this.INPUT_hue?this.INPUT_hue.value:200}set hue(e){this.INPUT_hue&&(this.INPUT_hue.value=+e)}get sat(){return this.INPUT_sat?this.INPUT_sat.value:50}set sat(e){this.INPUT_sat&&(this.INPUT_sat.value=+e)}get lum(){return this.INPUT_lum?this.INPUT_lum.value:50}set lum(e){this.INPUT_lum&&(this.INPUT_lum.value=+e)}async connectedCallback(){bind(this.shadowRoot,this),setTextLum("body"),setCssVar("--brand-font-size",+this.fontSize,"%"),this.update()}update(){render(html`
      <style>
        .tools {
          /* right: 10px; */
          /* position: fixed; */
          background: rgba(225,225,225,.55);
          padding: 1em;
          border-radius: .25em;
          max-width: 20em;
          margin: 10px;
        }
        .tools > * {
          display: inline-block;
        }
        .tools label {
          min-width: 9em;
          max-width: 11em;
        }
      </style>
      <div class="tools">
        <label for="font-picker-size">Font size - ${this.fontSize}</label>
        <input type="range" id="font-picker-size"
          data-bind="
            value:fontSize
          "
          data-trigger="
            change:onFontSizeChange
          "
          value="100"
          min="50"
          max="300">
        <label for="color-picker-primary">Hex color</label>
        <input type="color" 
          id="color-picker-primary" 
          data-bind="
            value:hex
          "
          data-trigger="
            change:onHexChange
          ">
        <label for="hue-picker">Hue - ${this.hue}</label>
        <input type="range" id="hue-picker"
          data-bind="
            value:hue
          "
          data-trigger="
            change:onHueChange
          " 
          min="0" 
          max="359">
        <label for="sat-picker">Sat - ${this.sat}</label>
        <input type="range" id="sat-picker"
          data-bind="
            value:sat
          "
          data-trigger="
            change:onSatChange
          " 
          min="0" max="100">
        <label for="lum-picker">Lum - ${this.lum}</label>
        <input type="range" id="lum-picker"
          data-bind="
            value:lum
          "
          data-trigger="
            change:onLumChange
          " 
          min="0" max="100">
        <!-- <label for="color-picker-contrast">Contrast color</label>
        <input type="color" id="color-picker-contrast" value="#ffffff"> -->
        <div class="display-block surface1">
          <label>Surface1</label>
        </div>
        <div class="display-block surface2">
          <label>Surface2</label>
        </div>
        <div class="display-block surface3">
          <label>Surface3</label>
        </div>
        <div class="display-block text1">
          <label>Text1</label>
        </div>
        <div class="display-block text2">
          <label>Text2</label>
        </div>
        <div class="display-block text3">
          <label>Text3</label>
        </div>
      </div>
    `,this.shadowRoot)}onFontSizeChange(e){this.fontSize=e.target.value,setCssVar("--brand-font-size",+this.fontSize,"%"),console.log("font-size",this.fontSize),this.update()}onHexChange(e){this.hex=e.target.value,console.log("color change",this.hex);const{h:t,s:n,l:s}=hexToHSL(this.hex);console.log("h",t),this.hue=t,setCssVar("--h",+t),this.update()}onHueChange(e){this.hue=e.target.value,setCssVar("--h",+this.hue),this.hex=hslToHex(this.hue,this.sat,this.lum),console.log("hue",this.hue,"hex",this.hex),this.update()}onSatChange(e){this.sat=e.target.value,setCssVar("--s",+this.sat),this.hex=hslToHex(this.hue,this.sat,this.lum),console.log("sat",this.sat,"hex",this.hex),this.update()}onLumChange(e){this.lum=e.target.value,setCssVar("--l",+this.lum),this.hex=hslToHex(this.hue,this.sat,this.lum),console.log("lum",this.lum,"hex",this.hex),this.update()}}customElements.define("css-theme",CssTheme);class DataGrid extends BaseElement{constructor(){super(),this._items=[],this._sortBy=[],this._thMenu=[]}static get observeAttributes(){return["allowSort"]}get element(){return this.shadowRoot}get isFullWidth(){return this.hasAttribute("is-full-width")}get isStriped(){return this.hasAttribute("is-striped")}get isHoverable(){return this.hasAttribute("is-hoverable")}get stylesPath(){return this.getAttribute("styles-path")}set stylesPath(e){this.setAttribute("styles-path",e)}get rowKey(){return this.getAttribute("row-key")}get allowSort(){return this.getAttribute("allow-sort")}set allowSort(e){this.setAttribute("allow-sort",e),this.update()}get allowMultiSort(){return this.getAttribute("allow-multi-sort")}set allowMultiSort(e){this.setAttribute("allow-multi-sort",e)}get caption(){return this.getAttribute("caption")}set caption(e){this.setAttribute("caption",e)}get filterType(){return this.getAttribute("filter-type")}set filterType(e){this.setAttribute("filter-type",e),this.update()}get height(){return this.getAttribute("height")}set height(e){this.setAttribute("height",e)}get width(){return this.getAttribute("width")}set width(e){this.setAttribute("width",e)}get pageSize(){return+this.getAttribute("page-size")||0}set pageSize(e){this.setAttribute("page-size",e)}get pages(){let e=1;const t=this.items.length,n=+this.pageSize;return t>0&&n>0&&(e=Math.ceil(t/n)),e}get currentPage(){return this._currentPage||0}set currentPage(e){this._currentPage=e}get dataView(){if(this.pageSize>0){let e=this.currentPage*this.pageSize;return this.items.slice(0).filter(((t,n)=>n>=e&&n<e+this.pageSize))}return this.items}get items(){return this._items}set items(e){this._items=e,this._orig_items||(this._orig_items=JSON.parse(JSON.stringify(e))),this.update()}get sortBy(){return this._sortBy}set sortBy(e){this._sortBy=e}get rounded(){return this.getAttribute("rounded")}set rounded(e){this.setAttribute("rounded",e),this.update()}async attributeChangeCallback(e,t,n){console.log("data-grid:attributeChangeCallback",e,t,n)}async connectedCallback(){window.addEventListener("click",(e=>{this.hideMenu(e),this.hideColumnOptions(e)})),await this.loadCss(),this.update(),bind(this.shadowRoot,this)}update(){this._cols||(this._cols=$$("data-grid-col",this));let e=`\n      <tr>\n        <td colspan="${this._cols.length}">\n          <div style="display: grid; justify-content: center; align-content: center; height: 200px;">\n            No Data\n          </div>\n        </td>\n      </tr>\n    `;this.dataView.length>0&&(e=`\n        ${this.dataView.map(((e,t)=>{let n="";if(this.rowKey){n=`data-row-key="${RenderRowTemplate(this.rowKey,e)}"`}return`<tr data-index="${t}"${n}>\n          ${this._cols.filter((e=>!toBool(e.getAttribute("exclude-column")))).map(((t,n)=>{t.getAttribute("header");const s=t.getAttribute("col"),r=t.hasAttribute("no-wrap");t.getAttribute("width"),t.getAttribute("min-width"),t.getAttribute("max-width");const a=t.querySelector("template#column-template");if(a){const t=a.innerHTML.trim().replace(/{{/g,"${").replace(/}}/g,"}");return`\n                <td ${r?'class="no-wrap"':""} data-col-index="${n}"\n                >\n                  ${RenderTemplate(t,{item:e})}\n                </td>\n              `}return`\n                <td ${r?'class="no-wrap"':""} data-col-index="${n}"\n                >\n                  ${RenderRowTemplate(s,e)}\n                </td>\n              `})).join("")}\n        </tr>`})).join("")}    \n      `);const t=`\n      <div id="grid-host" ${this.height?`style="height: ${this.height};"`:""}>\n        ${this.renderSvg()}\n        ${this.renderStyle()}\n        <table class="table${this.isFullWidth?" is-fullwidth":""}${this.isStriped?" is-striped":""}${this.isHoverable?" is-hoverable":""}${this.rounded?` rounded-${this.rounded} overflow-hidden`:""}">\n          ${this.caption?`<caption class="font-x-large">${this.caption}</caption>`:""}\n          <colgroup>\n            ${this._cols.filter((e=>!toBool(e.getAttribute("exclude-column")))).map((e=>this.renderCol(e))).join("")}\n          </colgroup>\n          <thead class="sticky">\n            <tr class="thead-filter">\n              ${this._cols.filter((e=>!toBool(e.getAttribute("exclude-column")))).map(((e,t)=>this.renderThFilter(e,t))).join("")}\n            </tr>\n            <tr>\n              ${this._cols.filter((e=>!toBool(e.getAttribute("exclude-column")))).map(((e,t)=>this.renderTh(e,t))).join("")}\n            </tr>\n          </thead>\n          <tfoot>\n            ${this.renderPagination()}\n          </tfoot>\n          <tbody>\n            ${e}\n          </tbody>\n        </table>\n      </div>\n    `;this.shadowRoot.innerHTML=t}renderSvg(){return'\n      <svg aria-hidden="true" focusable="false" style="display:none">\n      <defs>\n        <symbol id="caret-up2" x="0px" y="0px" viewBox="0 0 292.362 292.362" style="enable-background:new 0 0 292.362 292.362;"\n          xml:space="preserve">\n          <path transform="scale(1, -1) translate(0, -100)" fill="currentColor" d="M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\n            C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\n            s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z"/>\n        </symbol>\n        <symbol id="caret-down2" x="0px" y="0px" viewBox="0 0 292.362 292.362" style="enable-background:new 0 0 292.362 292.362;"\n          xml:space="preserve">\n          <path fill="currentColor" d="M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\n            C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\n            s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z"/>\n        </symbol>\n\n\n        <symbol id="caret-up" x="0px" y="0px" viewBox="0 0 320 512" style="enable-background:new 0 0 320 512; width: 0.625em;" xml:space="preserve">\n          <path fill="currentColor" d="M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"/>\n        </symbol>\n        <symbol id="caret-down" x="0px" y="0px" viewBox="0 0 320 512" style="enable-background:new 0 0 320 512; width: 0.625em;" xml:space="preserve">\n          <path fill="currentColor" d="M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"/>\n        </symbol>\n        \n\n        <symbol id="filter" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n          <path fill="currentColor" d="M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"/>\n        </symbol>\n        <symbol id="play-first" x="0px" y="0px" viewBox="0 0 448 512" style="enable-background:new 0 0 448 512;" xml:space="preserve">\n          <path fill="currentColor" d="M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"/>\n        </symbol>\n        <symbol id="play-previous" x="0px" y="0px" viewBox="0 0 192 512" style="enable-background:new 0 0 192 512;" xml:space="preserve">\n          <path fill="currentColor" d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"/>\n        </symbol>\n        <symbol id="play-next" x="0px" y="0px" viewBox="0 0 192 512" style="enable-background:new 0 0 192 512;" xml:space="preserve">\n          <path fill="currentColor" d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"/>\n        </symbol>\n        <symbol id="play-last" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">\n          <path fill="currentColor" d="M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"/>\n        </symbol>\n        <symbol id="bars" x="0px" y="0px" viewBox="0 0 448 512" style="enable-background:new 0 0 448 512;" xml:space="preserve">\n          <path fill="currentColor" d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/>\n        </symbol>\n        <symbol id="grip-vertical" x="0px" y="0px" viewBox="0 0 320 512" style="enable-background:new 0 0 320 512;" xml:space="preserve">\n          <path fill="currentColor" d="M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"/>\n        </symbol>\n\n        <symbol id="lock" x="0px" y="0px" viewBox="0 0 448 512" style="enable-background:new 0 0 448 512;" xml:space="preserve">\n          <path fill="currentColor" d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"/>\n        </symbol>\n        <symbol id="unlock" x="0px" y="0px" viewBox="0 0 448 512" style="enable-background:new 0 0 448 512;" xml:space="preserve">\n          <path fill="currentColor" d="M400 256H152V152.9c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v16c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-16C376 68 307.5-.3 223.5 0 139.5.3 72 69.5 72 153.5V256H48c-26.5 0-48 21.5-48 48v160c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48z"/>\n        </symbol>\n        <symbol id="lock-open" x="0px" y="0px" viewBox="0 0 576 512" style="enable-background:new 0 0 576 512;" xml:space="preserve">\n          <path fill="currentColor" d="M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"/>\n        </symbol>\n\n        <symbol id="trash" x="0px" y="0px" viewBox="0 0 448 512" style="enable-background:new 0 0 448 512;" xml:space="preserve">\n          <path fill="currentColor" d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"/>\n        </symbol>\n\n        </defs>\n      </svg>    \n    '}renderStyle(){return"\n      <style>\n        :host { \n          display: block;\n        }\n        #grid-host { \n          overflow: auto;\n        }\n        table {\n          position: relative;\n          border-collapse: collapse;\n          border-spacing: 0px;\n          table-layout: fixed;\n          margin-bottom: 10px;\n        }\n        caption {\n          background: var(--canvas1);\n          color: var(--header-text1);\n          padding: 10px 0 0 0;\n        }\n        tbody tr {\n          background-color: var(--canvas1);\n          color: var(--canvas-text1);\n        }\n        .is-striped tbody tr:not(.is-selected):nth-child(2n) {\n          background-color: rgb(250, 250, 250);\n        }\n        .is-striped tr:nth-child(even) {\n          background-color: #dddddd;\n        }\n        .is-hoverable.is-striped tbody tr:not(.is-selected):hover {\n          background-color: rgb(250, 250, 250);\n          background-color: var(--canvas1);\n          color: var(--canvas-text1);\n        }\n        .is-hoverable tbody tr:not(.is-selected):hover {\n          background-color: rgb(250, 250, 250);\n          background-color: var(--canvas1);\n          color: var(--canvas-text1);\n        }\n        .is-fullwidth {\n          width: 100%;\n        }\n        col.hidden {\n          visibility: collapse;\n        }\n        thead tr:not(.thead-filter) {\n          background: var(--header1);\n          color: var(--header-text2);\n        }\n        thead.sticky {\n          position: sticky;\n          top: 0;\n        }\n        th {\n          user-select: none;\n          vertical-align: baseline;\n        }\n        th .th-header {\n          display: flex;\n          justify-content: space-between;\n        }\n        .svg-icon {\n          display: inline-flex;\n          align-self: center;\n        }\n        .svg-icon svg {\n          height: 1.05em;\n          width: .6em;\n        }\n        .svg-icon.baseline svg {\n          top: .5em;\n          position: relative;\n        }\n        thead th, tbody td {\n          padding: 10px;\n          text-align: left;\n          xwhite-space: nowrap;\n        }\n        thead th:not(.border-ignore), tbody td:not(.border-ignore) {\n          border-bottom: 1px solid var(--header-border1);\n        }\n        th .menu-options {\n          padding: 10px 0;\n          display: none;\n          position: absolute;\n          background-color: #f1f1f1;\n          background: var(--canvas1);\n          color: var(--canvas-text1);\n          min-width: 175px;\n          max-height: 400px;\n          overflow: auto;\n          box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n          z-index: 1;          \n        }\n        th .menu-options.show {\n          display: block;\n        }\n        th .menu-options ul {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n        th .menu-options .actions {\n          display: flex;\n          flex-flow: row;\n          justify-content: flex-end;\n          font-weight: 500;\n          font-size: .9rem;\n        }\n        th .menu-options .menu-option {\n          font-weight: 500;\n          font-size: 14px;\n          padding: 10px 40px 10px 20px;\n          padding: 15px 10px;\n        }\n        th .menu-options .menu-option:hover {\n          background: rgba(0, 0, 0, 0.2);\n        }\n        th .menu-options .menu-option .drag-handle {\n          user-select: none;\n          cursor: pointer;\n        }\n        th .menu-options .menu-option .drag-handle * {\n          user-select: none;\n          pointer-events: none;\n        }\n\n        th .column-options {\n          padding: 10px;\n          display: none;\n          position: absolute;\n          background-color: #f1f1f1;\n          background: var(--canvas1);\n          color: var(--canvas-text1);\n          min-width: 175px;\n          max-height: 400px;\n          overflow: auto;\n          box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n          z-index: 1;          \n        }\n        th .column-options.show {\n          display: block;\n        }\n        th .column-options ul {\n          list-style: none;\n          padding: 0;\n          margin: 0;\n        }\n        th .column-options .actions{\n          display: flex;\n          flex-flow: row;\n          justify-content: flex-end;\n          font-weight: 500;\n          font-size: .9rem;\n        }\n        th .column-options .column-option {\n          font-weight: 500;\n          font-size: 14px;\n          padding: 10px 40px 10px 20px;\n          padding: 15px 10px;\n        }\n        th .column-options .column-option:hover {\n          background: rgba(0, 0, 0, 0.2);\n        }\n        th .column-options .column-option .drag-handle {\n          user-select: none;\n          cursor: pointer;\n        }\n        th .column-options .column-option .drag-handle * {\n          user-select: none;\n          pointer-events: none;\n        }\n        tfoot, tfoot td { \n          border: none; \n        }\n        tbody {\n          background: var(--canvas1);\n          color: var(--canvas-text1);\n        }\n        thead th.no-wrap,\n        tbody td.no-wrap {\n          white-space: nowrap;\n        }\n        th, td {\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        .pagination {\n          background: var(--header1);\n          color: var(--header-text2);\n          align-items: center;\n          display: flex;\n          justify-content: center;\n          justify-content: space-between;\n          text-align: center;\n          xfont-size: 1rem;\n          padding: 10px 0;\n        }\n        .pagination-button {\n          cursor: pointer;\n        }\n        .pagination-button:first-of-type {\n          margin-left: 15px;\n        }\n        .pagination-button:last-of-type {\n          margin-right: 15px;\n        }\n        .pagination-button[disabled] {\n          opacity: .5;\n          cursor: not-allowed;\n        }\n        .svg-button {\n          display: inline-flex;\n          align-self: center;\n          user-select: none;\n        }\n        .svg-button svg {\n          height: .9em;\n          width: 1em;\n        }\n        .svg-button.baseline svg {\n          top: .5em;\n          position: relative;\n        }\n      </style>    \n    "}renderCol(e){const t=e.getAttribute("hidden"),n=e.getAttribute("width")||"*",s=e.getAttribute("min-width"),r=e.getAttribute("max-width");return t?`<col class="hidden" style="${"*"!==n?`width: ${n};`:""}${s?`min-width: ${s};`:""}${r?`maxn-width: ${r};`:""}">`:`<col style="${"*"!==n?`width: ${n};`:""}${s?`min-width: ${s};`:""}${r?`maxn-width: ${r};`:""}">`}renderTh(e,t){const n=e.getAttribute("header"),s=e.getAttribute("col");e.setAttribute("col-index",t);const r=e.getAttribute("type"),a=e.getAttribute("sort-direction")||"",i=e.getAttribute("sort-index")||null,o=e.hasAttribute("no-wrap"),l='<span class="svg-icon"><svg><use xlink:href="#caret-up"></use>'+(i>-1?`<sup style="margin-left:5px;">${i}</sup></span>`:""),c='<span class="svg-icon"><svg><use xlink:href="#caret-down"></use>'+(i>-1?`<sup style="margin-left:5px;">${i}</sup></span>`:""),d=toBool(this.allowSort)&&["ascending","descending"].includes(a),u=e.getAttribute("filter-by")||"equal";let h='<span class="xsvg-icon" style="width: 19px;">&nbsp;</span>';return d&&("ascending"===a?h=l:"descending"===a&&(h=c)),`\n      <th class="${0==t?""+(this.rounded?`rounded-tl-${this.rounded} overflow-hidden`:""):""}${t==this._cols.length-1?""+(this.rounded?`rounded-tr-${this.rounded} overflow-hidden`:""):""}"\n        data-header="${n}"\n        data-col="${s}" \n        data-type="${r}"\n        data-col-index="${t}" \n        ${toBool(this.allowSort)?`data-sort-direction="${a}"`:""}\n        sort-index="${i>-1?i:""}"\n        data-filter-by="${u}"\n        ${o?'class="no-wrap"':""}\n      >\n        <div class="th-header" ${toBool(this.allowSort)?'data-trigger="click:sortColumnClick"':""}>\n          <div>${n} ${h||""}</div>\n          ${"none"!==u?'<span class="svg-icon cursor-pointer" data-trigger="click:toggleColumnOptions"><svg><use xlink:href="#filter"></use></span>':""}\n        </div>\n\n        ${this.renderColumnOptions({header:n,col:s,type:r,filterBy:u})}\n      </th>\n    `}renderThFilter(e,t){const n=e.getAttribute("header"),s=e.getAttribute("col");e.setAttribute("col-index",t);const r=e.getAttribute("type"),a=e.getAttribute("filter-by")||"equal";const i=e.querySelector("template#header-template");let o="";return i&&(o=i.innerHTML.trim()),`\n      <th class="border-ignore"\n        data-header="${n}"\n        data-col="${s}" \n        data-type="${r}"\n        data-col-index="${t}"\n        data-filter-by="${a}"\n      >\n        ${["client","server"].includes(this.filterType)&&["string","number"].includes(r)?`\n          ${o||'<div class="header-group">\n        <input class="header-control" type="search" data-trigger="keydown:onFilter">\n      </div>'}\n        `:""}\n        ${["bool"].includes(r)?'\n        <div class="header-group">\n          <input class="header-control" type="checkbox"\n            data-trigger="change:onCheckboxChanged">\n        </div>\n        ':""}\n        ${["action"].includes(r)?`\n          ${o}\n        `:""}\n      </th>\n    `}renderPagination(){if(this.pageSize>0){return`\n        <tr>\n        <td colspan="${this._cols.length}">\n        <div class="pagination" role="navigation" aria-label="pagination">\n          <div style="display: flex; flex-flow: row;">\n            <a class="pagination-button" data-trigger="click:firstPage">\n              <i class="fa fa-fast-backward"></i>\n              \x3c!-- <span class="svg-button"><svg><use xlink:href="#play-first"></use></span> --\x3e\n            </a>\n            <a class="pagination-button ml-10" ${0===this.currentPage?"disabled":""} data-trigger="click:previousPage">\n              <i class="fa fa-backward"></i>\n              \x3c!-- <span class="svg-button" style="font-size: 1.5em;"><svg><use xlink:href="#play-previous"></use></span> --\x3e\n            </a>\n          </div>\n          <div>\n            Page ${this.currentPage+1} of ${this.pages}\n          </div>\n          <div style="display: flex; flex-flow: row;">\n            <a class="pagination-button" ${this.currentPage===this.pages-1?"disabled":""} data-trigger="click:nextPage">\n              <i class="fa fa-forward"></i>\n              \x3c!-- <span class="svg-button" style="font-size: 1.5em;"><svg><use xlink:href="#play-next"></use></span> --\x3e\n            </a>\n            <a class="pagination-button ml-10" data-trigger="click:lastPage">\n              <i class="fa fa-fast-forward"></i>\n              \x3c!-- <span class="svg-button"><svg><use xlink:href="#play-last"></use></span> --\x3e\n            </a>\n          </div>\n        </div> \n        </td>\n        </tr>     \n      `}return""}renderPagination2(){return this.pageSize>0?`\n        <nav class="pagination is-centered is-small" role="navigation" aria-label="pagination" style="margin: 0 5px;">\n          <a class="pagination-previous" ${0===this.currentPage?"disabled":""} data-trigger="click:previousPage">Previous</a>\n          <a class="pagination-next" ${this.currentPage===this.pages-1?"disabled":""} data-trigger="click:nextPage">Next page</a>\n          <ul class="pagination-list">\n            ${this._cols.map(((e,t)=>`\n                <li>\n                  <a class="pagination-link ${t===this.currentPage?"is-current":""}" aria-label="Goto page ${t+1}" data-page-index="${t}" data-trigger="click:gotoPage">${t+1}</a>\n                </li>\n              `)).join("")}\n          </ul>\n        </nav>      \n      `:""}renderMenu(){return`\n      <div class="menu-options">\n        <ul data-trigger="dragstart:onMenuItemDrag">\n          ${this._cols.map(((e,t)=>this.renderMenuItem(e,t))).join("")}\n        </ul>\n        <div class="actions">\n          <button class="btn" data-trigger="click:applyMenuClick">Apply</button>\n          <button class="btn" data-trigger="click:cancelMenuClick">Cancel</button>\n        </div>\n      </div>\n    `}renderMenuItem(e,t){const n=e.getAttribute("header"),s=e.getAttribute("exclude-column");return`\n      <li class="menu-option" data-trigger="\n        click:menuItemClick\n        drop:onMenuItemDrop\n        dragover:onMenuItemDragOver\n        dragleave:onMenuItemDragLeave\n        " \n        draggable="true" data-index="${t}">\n        <span class="svg-icon drag-handle" xdata-trigger="mousedown:preventEvent">\n          <svg><use xlink:href="#grip-vertical"></use>\n        </span>\n        <input class="form-control" type="checkbox" ${toBool(s)?"":"checked"} data-trigger="change:toggleColumn" data-index="${t}">\n        <span style="margin-left: 5px; user-select: none;">\n          ${n}\n        </span>\n      </li>\n    `}renderColumnOptions(e){const{header:t,col:n,type:s,filterBy:r}=e;return`\n      <div class="column-options">\n        ${["client","server"].includes(this.filterType)&&["string","number"].includes(s)?`\n          <div class="form-group">\n            <label>Filter By</label>\n            ${this.renderColumnSelect(s,r)}\n          </div>\n        `:""}\n        <div class="form-group">\n          <label>Column Order</label>\n          <ul data-trigger="dragstart:onMenuItemDrag">\n            ${this._cols.map(((e,t)=>this.renderColumnOption(e,t))).join("")}\n          </ul>\n        </div>\n        <div class="actions">\n          <button class="form-button link" data-trigger="click:cancelMenuClick">Cancel</button>\n          <button class="btn" data-trigger="click:applyMenuClick">Apply</button>\n        </div>\n      </div>\n    `}renderColumnSelect(e,t){return`\n      <select class="form-control" data-trigger="\n        click:preventEvent\n        change:updateFilterBy\n      ">\n        ${"string"===e?`\n        <option value="equal" ${"equal"===t?"selected":""}>Equal</option>\n        <option value="not-equal" ${"not-equal"===t?"selected":""}>Not Equal</option>\n        <option value="starts-with" ${"starts-with"===t?"selected":""}>Starts With</option>\n        <option value="ends-with" ${"ends-with"===t?"selected":""}>Ends With</option>\n        <option value="contains" ${"contains"===t?"selected":""}>Contains</option>            \n        `:""}\n        ${"number"===e?`\n        <option value="equal" ${"equal"===t?"selected":""}>Equal</option>\n        <option value="not-equal" ${"not-equal"===t?"selected":""}>Not Equal</option>\n        <option value="greater-than" ${"greater-than"===t?"selected":""}>Greater Than</option>\n        <option value="greater-than-or-equal" ${"greater-than-or-equal"===t?"selected":""}>Greater Than Or Equal</option>\n        <option value="less-than" ${"less-than"===t?"selected":""}>Less Than</option>\n        <option value="less-than-or-equal" ${"less-than-or-equal"===t?"selected":""}>Less Than Or Equal</option>\n        `:""}\n      </select>\n    `}renderColumnOption(e,t){const n=e.getAttribute("header"),s=e.getAttribute("exclude-column");return`\n      <li class="column-option" data-trigger="\n        click:menuItemClick\n        drop:onMenuItemDrop\n        dragover:onMenuItemDragOver\n        dragleave:onMenuItemDragLeave\n        " \n        draggable="true" data-index="${t}">\n        <span class="svg-icon drag-handle" xdata-trigger="mousedown:preventEvent">\n          <svg><use xlink:href="#grip-vertical"></use>\n        </span>\n        <input type="checkbox" ${toBool(s)?"":"checked"} data-trigger="change:toggleColumn" data-index="${t}">\n        <span style="margin-left: 5px; user-select: none;">\n          ${n}\n        </span>\n      </li>\n    `}sortColumnClick(e){const t=e.currentTarget.parentNode,n=t.getAttribute("data-col"),s=+t.getAttribute("data-col-index"),r=t.getAttribute("data-type"),a=t.getAttribute("data-sort-direction"),i=this._cols[s];if(["action","bool","photo"].includes(r))return;this.allowMultiSort||(this.sortBy=[],this._cols.forEach((e=>{e.setAttribute("sort-direction",""),e.setAttribute("sort-index","")})));let o=this.sortBy.find((e=>e.col===n));if(o||(o={col:n,type:r,direction:""},this.sortBy.push(o)),""===a)o.direction="ascending";else if("ascending"===a)o.direction="descending";else if("descending"===a){o.direction="";const e=this.sortBy.findIndex((e=>e.col===n));this.sortBy.splice(e,1)}i.setAttribute("sort-direction",o.direction);const l=this.sortBy.findIndex((e=>e.col===n));l>-1&&(o.sortIndex=l+1,i.setAttribute("sort-index",l+1));let c=this.items;this.sortBy.length<2&&(c=this._orig_items.slice(0)),c=this.computeSort(c,this.sortBy),this.items=c}computeSort(e,t){return e.sort(((e,n)=>t.map((t=>{const s=RenderRowTemplate(t.col,e),r=RenderRowTemplate(t.col,n);if("number"===t.type){if("ascending"===t.direction)return+s-+r;if("descending"===t.direction)return+r-+s}else{if("ascending"===t.direction)return s.localeCompare(r);if("descending"===t.direction)return r.localeCompare(s)}})).reduce(((e,t)=>e||t),!1)))}firstPage(e){0!==this.currentPage&&(this.currentPage=0,this.update())}previousPage(e){0!==this.currentPage&&(this.currentPage--,this.update())}nextPage(e){this.currentPage!==this.pages-1&&(this.currentPage++,this.update())}lastPage(e){this.currentPage!==this.pages-1&&(this.currentPage=this.pages-1,this.update())}gotoPage(e){const t=+e.currentTarget.getAttribute("data-page-index");this.currentPage=t,this.update()}onFilter(e){if("Enter"===e.key){const{filterType:t}=this;if("client"===t)return this.clientFilter(e.currentTarget);if("server"===t)return this.serverFilter(e.currentTarget)}return!0}clientFilter(e){const{value:t}=e;let n=this._orig_items;if(t){const s=e.parentNode.parentNode,r=s.getAttribute("data-col");s.getAttribute("data-type");const a=s.getAttribute("data-filter-by"),i=e.getAttribute("data-path");let o="";i&&(o=`(item) => item.${i}`),n=this.items.filter((e=>{const n=RenderRowTemplate(o||r,e);switch(a){case"equal":return n.toLowerCase()===t.toLowerCase();case"not-equal":return n.toLowerCase()!==t.toLowerCase();case"starts-with":return n.toLowerCase().startsWith(t.toLowerCase());case"ends-with":return n.toLowerCase().endsWith(t.toLowerCase());case"contains":return n.toLowerCase().includes(t.toLowerCase());case"greater-than":return+n>+t;case"greater-than-or-equal":return+n>=+t;case"less-than":return+n<+t;case"less-than-or-equal":return+n<=+t;default:return n.toLowerCase()===t.toLowerCase()}})),this.sortBy=[],this._cols.forEach((e=>{e.setAttribute("sort-direction",""),e.setAttribute("sort-index","")}))}return this.items=n,!1}serverFilter(e){const t=this.getFilterElements();return this.dispatchEvent(composeEvent("filter",null,t)),!1}getFilterElements(){const e=$$("th input.header-control",this),t=[];return e.forEach((e=>{const n=e.parentNode.parentNode;n.getAttribute("data-header");const s=n.getAttribute("data-col");n.getAttribute("data-type");const r=n.getAttribute("data-filter-by"),{value:a}=e,i=e.getAttribute("data-path");a&&i&&t.push({filter:a,col:s,filterBy:r,path:i})})),t}toggleMenu(e){e.preventDefault();return e.currentTarget.querySelector(".menu-options").classList.toggle("show"),!1}hideMenu(e){$$(".menu-options",this).forEach((e=>{e.classList.remove("show")}))}menuItemClick(e){e.stopPropagation()}toggleColumn(e){const t=e.target,n=t.getAttribute("data-index"),s=this._thMenu.find((e=>e.index===+n));s?s.exclude=!t.checked:this._thMenu.push({index:+n,exclude:!t.checked})}applyMenuClick(e){this._cols=$$("data-grid-col",this),this._thMenu.forEach((e=>{this._cols[e.index].setAttribute("exclude-column",e.exclude)})),this._thMenu=[],this.update()}cancelMenuClick(e){const t=$$(".menu-options input",e.target.parentNode.parentNode);this._thMenu.forEach(((e,n)=>{t[+e.index].checked=e.exclude})),this._thMenu=[]}onMenuItemDrag(e){if(this.dragItem=e.target,this.dragIndex=+e.target.getAttribute("data-index"),this.dragColumn=this._cols[this.dragIndex],e.target instanceof HTMLLIElement){const t={index:+e.target.getAttribute("data-index")};e.dataTransfer.setData("options",JSON.stringify(t))}else e.preventDefault()}onMenuItemDrop(e){e.preventDefault();const t=e.dataTransfer.getData("options");return JSON.parse(t),!0}onMenuItemDragOver(e){if(e.preventDefault(),this.dragItem===e.target)return;const t=+e.target.getAttribute("data-index"),n=this._cols[t];if(this.isBefore(this.dragItem,e.target))try{e.target.parentNode.insertBefore(this.dragItem,e.target),n.parentNode.insertBefore(this.dragColumn,n)}catch(e){}else{if(e.target.nextSibling.contains(this.dragItem))return;try{e.target.parentNode.insertBefore(this.dragItem,e.target.nextSibling),n.parentNode.insertBefore(this.dragColumn,n.nextSibling)}catch(e){}}return!0}onMenuItemDragLeave(e){return e.preventDefault(),!0}isBefore(e,t){if(t.parentNode===e.parentNode)for(var n=e.previousSibling;n&&9!==n.nodeType;n=n.previousSibling)if(n===t)return!0;return!1}swap(e,t){const n=e.parentNode,s=e.nextSibling===t?e:e.nextSibling;t.parentNode.insertBefore(e,t),n.insertBefore(t,s)}preventEvent(e){return e.preventDefault(),e.stopPropagation(),!0}toggleColumnOptions(e){e.preventDefault(),e.stopPropagation();return e.currentTarget.closest("th").querySelector(".column-options").classList.toggle("show"),!1}hideColumnOptions(e){$$(".column-options",this).forEach((e=>{e.classList.remove("show")}))}updateFilterBy(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget,n=t.closest("th"),s=n.getAttribute("data-col"),r=this._cols.find((e=>e.getAttribute("col")===s));return r&&(n.setAttribute("data-filter-by",t.value),r.setAttribute("filter-by",t.value)),!1}onCheckboxChanged(e){const t=e.currentTarget,{checked:n}=t,s=+t.closest("th").getAttribute("data-col-index");$$(`td[data-col-index="${s}"] input.row-selector`,this).forEach((e=>e.checked=n))}broadcastEvent(e){const t=e.currentTarget,n=t.getAttribute("data-function"),s=+t.closest("tr").getAttribute("data-index"),r={row:this.dataView[s],index:s};return this.dispatchEvent(composeEvent(n,null,r)),!0}async loadGrid(){}async loadCss(){let e=["/node_modules/ss-web-components/dist/bundle.css"];this.stylesPath&&(e=this.stylesPath.split(";"));const t=[];e.forEach((e=>t.push(fetch(e))));const n=await Promise.all(t);for(let e of n){const t=await e.text(),n=new CSSStyleSheet;n.replaceSync(t),this.shadowRoot.adoptedStyleSheets=[...this.shadowRoot.adoptedStyleSheets,n]}}}customElements.define("data-grid",DataGrid);export{$,$$,BaseElement,CssTheme,DataGrid,EventBus,RenderRowTemplate,RenderTemplate,Router,bind,camelCaseToProperCase,collectAllElementsDeep,composeEvent,ctx,data,enableDragElement,hexToHSL,hslToHex,memoizer,pluckValue,properCaseToHyphenCase,setCssVar,setTextLum,toBool,toDate,toLower,toPhone,toProper,toUpper};
